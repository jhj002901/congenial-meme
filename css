/* =========================================================
   LIFE-MOGOTCHI · Tamagotchi CSS Upgrade Pack (FULL CSS)
   - LCD Scanline + Dither + Vignette
   - Toy device frame (gloss, screws, speaker holes, sticker)
   - Character idle/walk/squash/blink + ground shadow
   - Physical buttons (press/click)
   - Palette switcher via data-theme on <html> or <body>
     Options: lcd-green | lcd-blue | mono
   HOW TO USE:
     1) Put this entire CSS into your <style> (replace old).
     2) Add attribute to <html> or <body>:
        <html data-theme="lcd-green"> ...  (or lcd-blue, mono)
     3) JS can change theme:
        document.documentElement.dataset.theme = "lcd-blue";
   ========================================================= */

/* ---------- Theme Variables ---------- */
:root{
  /* defaults will be overridden by theme blocks below */
  --bg:#0b0c10;
  --frame:#2a2b33;
  --frame2:#1f2027;
  --frameStroke:rgba(255,255,255,.18);

  --lcd:#cfe8c9;           /* screen base */
  --lcd2:#bfe2b8;          /* screen alt */
  --lcdText:#214b2e;       /* text */
  --lcdText2:rgba(33,75,46,.78);
  --lcdGlow:rgba(155,231,196,.22);

  --accent:#3a7a52;
  --accent2:#2f6a45;

  --btn:#3b3d49;
  --btnTop:#4a4d5c;
  --btnEdge:#1c1e26;
  --btnText:rgba(255,255,255,.92);

  --shadow: 0 16px 48px rgba(0,0,0,.45);
  --radius:22px;
  --screenRadius:22px;

  --screw:rgba(0,0,0,.35);
  --screwHi:rgba(255,255,255,.14);

  --scanOpacity:.14; /* 0.10 ~ 0.25 */
  --ditherOpacity:.10; /* 0.08 ~ 0.18 */
  --vignetteOpacity:.36; /* 0.25 ~ 0.45 */

  --uiText: rgba(255,255,255,.92);
  --uiMuted: rgba(255,255,255,.68);
}

/* GREEN LCD */
:root[data-theme="lcd-green"]{
  --bg:#0b0c10;

  --frame:#2b2a2f;
  --frame2:#1f1e23;
  --frameStroke:rgba(255,255,255,.18);

  --lcd:#cfe8c9;
  --lcd2:#bfe2b8;
  --lcdText:#214b2e;
  --lcdText2:rgba(33,75,46,.78);
  --lcdGlow:rgba(155,231,196,.22);

  --accent:#2f6a45;
  --accent2:#214b2e;

  --btn:#3b3d49;
  --btnTop:#4a4d5c;
  --btnEdge:#1c1e26;
  --btnText:rgba(255,255,255,.92);

  --uiText: rgba(255,255,255,.92);
  --uiMuted: rgba(255,255,255,.70);
}

/* BLUE LCD */
:root[data-theme="lcd-blue"]{
  --bg:#070a12;

  --frame:#262a35;
  --frame2:#1b1f2a;
  --frameStroke:rgba(255,255,255,.18);

  --lcd:#cfe6ff;
  --lcd2:#bddcff;
  --lcdText:#1d2f5b;
  --lcdText2:rgba(29,47,91,.78);
  --lcdGlow:rgba(182,166,255,.22);

  --accent:#2b4fb0;
  --accent2:#1d2f5b;

  --btn:#37445c;
  --btnTop:#44536f;
  --btnEdge:#1b2232;
  --btnText:rgba(255,255,255,.92);

  --uiText: rgba(255,255,255,.92);
  --uiMuted: rgba(255,255,255,.70);
}

/* MONO */
:root[data-theme="mono"]{
  --bg:#0a0a0a;

  --frame:#2c2c2c;
  --frame2:#1e1e1e;
  --frameStroke:rgba(255,255,255,.18);

  --lcd:#e6e6e6;
  --lcd2:#dcdcdc;
  --lcdText:#111;
  --lcdText2:rgba(17,17,17,.72);
  --lcdGlow:rgba(255,255,255,.12);

  --accent:#111;
  --accent2:#111;

  --btn:#2f2f2f;
  --btnTop:#3a3a3a;
  --btnEdge:#151515;
  --btnText:rgba(255,255,255,.92);

  --uiText: rgba(255,255,255,.92);
  --uiMuted: rgba(255,255,255,.70);
}

/* ---------- Base ---------- */
*{ box-sizing:border-box; }
html, body{ height:100%; }
body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;

  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Apple SD Gothic Neo", "Noto Sans KR", Arial;
  color: var(--uiText);
  background:
    radial-gradient(900px 600px at 25% 10%, rgba(182,166,255,.18), transparent 60%),
    radial-gradient(800px 520px at 80% 25%, rgba(155,231,196,.14), transparent 60%),
    var(--bg);
}

/* ---------- Device Frame (Toy) ---------- */
.device{
  width:min(920px, 96vw);
  border-radius: 34px;
  padding: 18px;
  position:relative;
  overflow:hidden;
  box-shadow: var(--shadow);

  background:
    radial-gradient(900px 350px at 30% 0%, rgba(255,255,255,.16), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(0,0,0,.10)),
    linear-gradient(180deg, var(--frame), var(--frame2));
  border:1px solid var(--frameStroke);
}

/* glossy reflection band */
.device::before{
  content:"";
  position:absolute;
  left:-20%;
  top:-30%;
  width:140%;
  height:55%;
  transform: rotate(-8deg);
  background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,0));
  opacity:.55;
  pointer-events:none;
}

/* micro scratches / noise */
.device::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    repeating-linear-gradient(120deg,
      rgba(255,255,255,.06) 0px,
      rgba(255,255,255,.06) 1px,
      rgba(255,255,255,0) 3px,
      rgba(255,255,255,0) 10px);
  opacity:.06;
  pointer-events:none;
}

.device-inner{ position:relative; z-index:1; }

/* sticker area */
.topbar{
  display:flex;
  gap:12px;
  align-items:flex-start;
  justify-content:space-between;
  flex-wrap:wrap;
  padding:6px 6px 12px;
}
.brand{
  display:flex; flex-direction:column; gap:4px;
  padding:10px 12px;
  border-radius:16px;
  background:rgba(0,0,0,.12);
  border:1px solid rgba(255,255,255,.12);
}
.brand .title{
  font-size:14px;
  font-weight:800;
  letter-spacing:.4px;
}
.brand .subtitle{
  font-size:12px;
  color:var(--uiMuted);
  line-height:1.35;
}
.top-actions{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

/* Speaker holes (decor) */
.top-actions::before{
  content:"";
  display:inline-block;
  width:56px;
  height:28px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(circle, rgba(0,0,0,.45) 28%, transparent 30%) 0 0/10px 10px,
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.10));
  opacity:.9;
}

/* Screws */
.device .screw{
  position:absolute;
  width:18px; height:18px;
  border-radius:50%;
  border:1px solid rgba(255,255,255,.14);
  background:
    radial-gradient(circle at 30% 30%, var(--screwHi), transparent 50%),
    radial-gradient(circle at 50% 60%, rgba(0,0,0,.55), rgba(0,0,0,.25));
  box-shadow: inset 0 2px 4px rgba(0,0,0,.55);
  opacity:.9;
}
.device .screw::after{
  content:"";
  position:absolute; left:50%; top:50%;
  width:10px; height:2px;
  background:rgba(255,255,255,.18);
  transform:translate(-50%,-50%) rotate(20deg);
  border-radius:2px;
}
.device .screw.tl{ left:12px; top:12px; }
.device .screw.tr{ right:12px; top:12px; }
.device .screw.bl{ left:12px; bottom:12px; }
.device .screw.br{ right:12px; bottom:12px; }

/* Pills */
.pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:9px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(0,0,0,.14);
  font-size:12px;
  color:var(--uiMuted);
}
.pill strong{ color:var(--uiText); font-weight:800; }

/* ---------- Screen Shell ---------- */
.screen-shell{
  border-radius:28px;
  padding:14px;
  background:rgba(0,0,0,.14);
  border:1px solid rgba(255,255,255,.14);
  position:relative;
}

/* Screen with LCD look */
.screen{
  border-radius: var(--screenRadius);
  overflow:hidden;
  border: 2px solid rgba(0,0,0,.35);
  background: linear-gradient(180deg, var(--lcd), var(--lcd2));
  position:relative;
  height:420px;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.18),
    inset 0 -14px 34px rgba(0,0,0,.18),
    0 10px 28px rgba(0,0,0,.35);
}

/* LCD overlays: scanlines + dither + vignette */
.screen::before{
  content:"";
  position:absolute; inset:0;
  /* Scanlines + subtle vertical */
  background:
    repeating-linear-gradient(
      180deg,
      rgba(0,0,0, var(--scanOpacity)) 0px,
      rgba(0,0,0, var(--scanOpacity)) 1px,
      rgba(0,0,0, 0) 3px,
      rgba(0,0,0, 0) 6px
    ),
    repeating-linear-gradient(
      90deg,
      rgba(0,0,0,.06) 0px,
      rgba(0,0,0,.06) 1px,
      rgba(0,0,0,0) 4px,
      rgba(0,0,0,0) 10px
    );
  mix-blend-mode: overlay;
  opacity: .8;
  pointer-events:none;
  z-index:4;
}
.screen::after{
  content:"";
  position:absolute; inset:0;
  /* Dither dots + vignette */
  background:
    radial-gradient(circle, rgba(0,0,0,.22) 20%, transparent 22%) 0 0/6px 6px,
    radial-gradient(120% 90% at 50% 40%,
      rgba(0,0,0,0) 55%,
      rgba(0,0,0, var(--vignetteOpacity)) 100%);
  opacity: var(--ditherOpacity);
  mix-blend-mode: multiply;
  pointer-events:none;
  z-index:5;
}

/* Background layer inside screen */
.bg{
  position:absolute; inset:0;
  pointer-events:none;
  z-index:1;
}

/* Pixel-ish floor */
.floor{
  position:absolute;
  left:0; right:0; bottom:0;
  height:148px;
  background:
    linear-gradient(180deg, rgba(0,0,0,.08), rgba(0,0,0,.18)),
    repeating-linear-gradient(90deg,
      rgba(0,0,0,.10) 0px,
      rgba(0,0,0,.10) 2px,
      rgba(0,0,0,0) 6px,
      rgba(0,0,0,0) 10px);
  border-top:1px solid rgba(0,0,0,.20);
  opacity:.55;
}

/* Make room items look like “background layer” (no boxes) */
.room-items{
  position:absolute;
  bottom:18px; left:18px; right:18px;
  display:flex;
  justify-content:space-between;
  gap:10px;
  opacity:.9;
  filter: drop-shadow(0 8px 12px rgba(0,0,0,.28));
}
.item{
  width:110px;
  height:64px;
  border:none;
  background:transparent;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:28px;
  color: rgba(0,0,0,.32);
  text-shadow: 0 2px 0 rgba(255,255,255,.25);
}
@media (max-width:520px){
  .item{width:90px; height:60px; font-size:26px;}
}

/* ---------- HUD (LCD style) ---------- */
.hud{
  position:absolute;
  top:10px; left:10px; right:10px;
  display:flex;
  justify-content:space-between;
  gap:10px;
  z-index:6;
  pointer-events:none;
}
.hud-left, .hud-right{
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
}
.hud-badge{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:7px 10px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.22);
  background: rgba(255,255,255,.25);
  color: var(--lcdText2);
  font-size:12px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.25);
}
.hud-badge strong{ color: var(--lcdText); font-weight:900; }

.bar{
  width:120px;
  height:10px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.22);
  background: rgba(0,0,0,.08);
  overflow:hidden;
}
.bar > i{
  display:block;
  height:100%;
  width:50%;
  background: linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.10));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.25);
}
.bar.warn > i{ background: linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.14)); }
.bar.bad  > i{ background: linear-gradient(180deg, rgba(0,0,0,.26), rgba(0,0,0,.18)); }

/* ---------- Character ---------- */
.character{
  position:absolute;
  width:120px;
  height:120px;
  left:50%;
  top:52%;
  transform: translate(-50%, -50%);
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  z-index:7;
  filter: drop-shadow(0 14px 18px rgba(0,0,0,.28));
}

/* ground shadow */
.character::before{
  content:"";
  position:absolute;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  width:78px;
  height:18px;
  border-radius:50%;
  background:rgba(0,0,0,.18);
  filter: blur(2px);
  opacity:.65;
  transition: transform .12s, opacity .12s;
}

/* Sprite as “LCD cell” */
.sprite{
  width:100px;
  height:100px;
  border-radius:28px;
  border:1px solid rgba(0,0,0,.22);
  background:
    radial-gradient(120px 70px at 35% 20%, rgba(255,255,255,.45), transparent 55%),
    rgba(255,255,255,.25);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:64px;
  color: var(--lcdText);
  position:relative;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.35),
    inset 0 -10px 18px rgba(0,0,0,.10);
}

/* Blink overlay (subtle) */
.sprite::after{
  content:"";
  position:absolute;
  inset:10px;
  border-radius:22px;
  border:1px solid rgba(0,0,0,.10);
  opacity:.55;
}

/* Nameplate in LCD style */
.nameplate{
  position:absolute;
  bottom:-28px;
  left:50%;
  transform:translateX(-50%);
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.22);
  background: rgba(255,255,255,.25);
  font-size:12px;
  color: var(--lcdText2);
  white-space:nowrap;
}

/* Speech bubble pop */
.bubble{
  position:absolute;
  left:50%;
  transform:translateX(-50%) translateY(0) scale(.96);
  top:-56px;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.22);
  background: rgba(255,255,255,.25);
  font-size:12px;
  color: var(--lcdText);
  max-width:280px;
  text-align:center;
  opacity:0;
  transition:opacity .14s, transform .14s;
  pointer-events:none;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.25);
}
.bubble.show{
  opacity:1;
  transform:translateX(-50%) translateY(-6px) scale(1);
  animation: bubblePop .22s ease-out;
}
@keyframes bubblePop{
  0%{ transform:translateX(-50%) translateY(0) scale(.92); }
  70%{ transform:translateX(-50%) translateY(-8px) scale(1.05); }
  100%{ transform:translateX(-50%) translateY(-6px) scale(1); }
}
.bubble::after{
  content:"";
  position:absolute;
  left:50%;
  bottom:-7px;
  width:12px;
  height:12px;
  background: rgba(255,255,255,.25);
  border-right:1px solid rgba(0,0,0,.22);
  border-bottom:1px solid rgba(0,0,0,.22);
  transform:translateX(-50%) rotate(45deg);
}

/* ---------- Character Animations ----------
   NOTE: You need JS to toggle .moving on #char or .character when moving.
   We provide both idle + moving animations.
*/
@keyframes idleBob{
  0%,100%{ transform: translate(-50%, -50%) translateY(0); }
  50%{ transform: translate(-50%, -50%) translateY(-3px); }
}
@keyframes walkBob{
  0%,100%{ transform: translate(-50%, -50%) translateY(-1px) scaleX(1); }
  25%{ transform: translate(-50%, -50%) translateY(-5px) scaleX(.98); }
  50%{ transform: translate(-50%, -50%) translateY(-2px) scaleX(1.02); }
  75%{ transform: translate(-50%, -50%) translateY(-6px) scaleX(.99); }
}
@keyframes squash{
  0%{ transform:scale(1); }
  50%{ transform:scale(1.04,.96); }
  100%{ transform:scale(1); }
}
@keyframes blink{
  0%, 92%, 100%{ filter:none; }
  94%{ filter: brightness(.92) contrast(1.05); }
  96%{ filter: brightness(.86) contrast(1.1); }
}

.character{
  animation: idleBob 2.4s ease-in-out infinite;
}
.character .sprite{
  animation: blink 5.6s linear infinite;
}

/* moving state (JS should add/remove .moving) */
.character.moving{
  animation: walkBob .55s ease-in-out infinite;
}
.character.moving::before{
  transform:translateX(-50%) scale(1.06,.92);
  opacity:.55;
}
.character.bump .sprite{
  animation: squash .12s ease-out;
}

/* ---------- Controls (Physical Buttons) ---------- */
.controls{
  display:flex;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
  padding:14px 8px 0;
}
.ctrl-left,.ctrl-right{
  display:flex; gap:10px; flex-wrap:wrap; align-items:center;
}
.hint{
  color:var(--uiMuted);
  font-size:12px;
  line-height:1.4;
  padding:10px 12px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.10);
}

/* Button: toy physical */
.btn{
  cursor:pointer;
  border:1px solid rgba(255,255,255,.14);
  background:
    linear-gradient(180deg, var(--btnTop), var(--btn));
  color: var(--btnText);
  padding:10px 12px;
  border-radius:16px;
  font-size:12px;
  user-select:none;

  box-shadow:
    0 8px 0 var(--btnEdge),
    0 16px 24px rgba(0,0,0,.35);
  transition: transform .08s, box-shadow .08s, filter .08s;
}
.btn:hover{
  filter: brightness(1.05);
}
.btn:active{
  transform: translateY(6px);
  box-shadow:
    0 2px 0 var(--btnEdge),
    0 10px 16px rgba(0,0,0,.25);
}

/* primary button */
.btn.primary{
  border-color: rgba(255,255,255,.18);
  background:
    linear-gradient(180deg, rgba(255,255,255,.18), rgba(0,0,0,.08)),
    linear-gradient(180deg, rgba(0,0,0,.0), rgba(0,0,0,.0)),
    linear-gradient(180deg, var(--accent), var(--accent2));
  box-shadow:
    0 8px 0 rgba(0,0,0,.45),
    0 16px 24px rgba(0,0,0,.35);
}

/* danger button */
.btn.danger{
  background:
    linear-gradient(180deg, rgba(255,255,255,.14), rgba(0,0,0,.08)),
    linear-gradient(180deg, #a33, #7a1f1f);
  box-shadow:
    0 8px 0 rgba(0,0,0,.52),
    0 16px 24px rgba(0,0,0,.35);
}

/* small: optional */
.btn.small{
  padding:9px 10px;
  border-radius:14px;
  font-size:12px;
}

/* ---------- Modal (still modal, but toy style) ---------- */
.modal-backdrop{
  position:fixed; inset:0;
  background:rgba(0,0,0,.62);
  display:none;
  align-items:center;
  justify-content:center;
  padding:18px;
  z-index:999;
}
.modal-backdrop.show{ display:flex; }

.modal{
  width:min(860px, 96vw);
  border-radius:22px;
  border:1px solid rgba(255,255,255,.18);
  background:
    radial-gradient(900px 360px at 30% 0%, rgba(255,255,255,.18), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.20));
  box-shadow: 0 20px 60px rgba(0,0,0,.55);
  padding:16px;
}
.modal h3{ margin:6px 6px 10px; font-size:14px; letter-spacing:.3px; }
.modal p{ margin:0 6px 12px; color:var(--uiMuted); font-size:12px; line-height:1.4; }

.zodiac-grid{
  display:grid;
  grid-template-columns: repeat(6, 1fr);
  gap:10px;
  padding:6px;
}
@media (max-width:740px){ .zodiac-grid{grid-template-columns: repeat(4, 1fr);} }
@media (max-width:520px){ .zodiac-grid{grid-template-columns: repeat(3, 1fr);} }

.zodiac{
  cursor:pointer;
  padding:12px 10px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  gap:8px;
  transition: transform .10s, background .10s, filter .10s;
  user-select:none;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.18);
}
.zodiac:hover{
  transform: translateY(-2px);
  background: rgba(255,255,255,.10);
  filter: brightness(1.06);
}
.zodiac:active{
  transform: translateY(0);
}
.zodiac .e{ font-size:34px; }
.zodiac .t{ font-size:12px; color: rgba(255,255,255,.88); }
.modal-actions{
  display:flex;
  justify-content:flex-end;
  gap:10px;
  padding:10px 6px 4px;
  flex-wrap:wrap;
}

/* ---------- Utility: pixel vibe (optional) ---------- */
.pixel{
  image-rendering: pixelated;
}

/* ---------- Responsive tweaks ---------- */
@media (max-width:720px){
  .screen{ height: 440px; }
}
@media (max-width:520px){
  .device{ border-radius: 30px; }
  .screen-shell{ border-radius:24px; }
  .screen{ border-radius: 20px; }
}

/* =========================================================
   Optional: Theme Picker UI (if you add it later)
   - You can add a small selector element and style it.
   ========================================================= */
.theme-select{
  display:inline-flex;
  gap:8px;
  align-items:center;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(0,0,0,.14);
  color:var(--uiMuted);
  font-size:12px;
}
.theme-dot{
  width:12px; height:12px;
  border-radius:50%;
  border:1px solid rgba(255,255,255,.18);
  background: var(--lcd);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.18);
}

/* =========================================================
   IMPORTANT NOTE:
   For screws to show, add these elements inside .device in HTML:
     <div class="screw tl"></div>
     <div class="screw tr"></div>
     <div class="screw bl"></div>
     <div class="screw br"></div>

   For walking animation, JS should toggle:
     ui.char.classList.add("moving") while moving
     ui.char.classList.remove("moving") when idle
     (and optionally ui.char.classList.add("bump") on direction change)
   ========================================================= */
